<div class="space-y-6">
    <div class="flex justify-between items-center px-4">
        <div>
            <h1 class="text-2xl font-bold text-slate-900 border-none">My Leave Requests</h1>
            <p class="text-slate-500">Track and manage your holiday and absence requests</p>
        </div>
        <app-button label="Apply for Leave" icon="pi pi-calendar-plus" variant="primary"
            (onClick)="openApplyDialog()"></app-button>
    </div>

    <p-card styleClass="!shadow-sm !border-slate-200">
        <app-common-table [data]="store.myRequests()" [columns]="columns">
        </app-common-table>
    </p-card>
</div>

<!-- Apply Leave Dialog -->
<p-dialog header="Apply for Leave" [(visible)]="showDialog" [modal]="true" [draggable]="false" [resizable]="false"
    [style]="{ width: '600px' }" styleClass="!rounded-2xl">

    <form [formGroup]="form" (ngSubmit)="onApply()" class="grid grid-cols-1 gap-5 pt-4">
        <app-common-select label="Leave Type" [options]="store.leaveTypes()" optionLabel="name" optionValue="id"
            formControlName="leaveTypeId" placeholder="Select type of leave" [error]="getErrorMessage('leaveTypeId')">
        </app-common-select>

        <div class="grid grid-cols-2 gap-4">
            <app-common-datepicker label="Start Date" formControlName="startDate"
                [error]="getErrorMessage('startDate')">
            </app-common-datepicker>

            <app-common-datepicker label="End Date" formControlName="endDate" [error]="getErrorMessage('endDate')">
            </app-common-datepicker>
        </div>

        <app-common-input label="Reason" formControlName="reason" placeholder="Why are you taking leave?"
            [error]="getErrorMessage('reason')">
        </app-common-input>

        <div class="flex justify-end gap-3 mt-6 pt-4 border-t border-slate-200">
            <app-button label="Cancel" variant="secondary" (onClick)="showDialog = false"></app-button>
            <app-button type="submit" label="Submit Request" icon="pi pi-send" variant="primary"></app-button>
        </div>
    </form>
</p-dialog>