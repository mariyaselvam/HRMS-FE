<div class="space-y-6">
    <div class="flex justify-between items-center px-4">
        <div>
            <h1 class="text-2xl font-bold text-slate-900 dark:text-slate-100 border-none">Attendance</h1>
            <p class="text-slate-500 dark:text-slate-400">Track your work hours and manage shifts</p>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Check In/Out Widget -->
        <p-card
            styleClass="!shadow-indigo-100/50 !shadow-lg !border-none !overflow-hidden dark:!shadow-none dark:!border dark:!border-slate-800">
            <div class="p-2">
                <div class="text-center space-y-4">
                    <!-- Live Clock -->
                    <div class="py-4">
                        <div
                            class="text-4xl font-mono font-bold text-indigo-600 dark:text-indigo-400 tabular-nums tracking-tight">
                            {{ currentTime | date: 'HH:mm:ss' }}
                        </div>
                        <div
                            class="text-slate-400 dark:text-slate-500 text-sm mt-1 uppercase tracking-widest font-semibold">
                            {{ currentTime | date: 'EEEE, MMMM d' }}
                        </div>
                    </div>

                    <!-- Conditional State -->
                    <div class="flex flex-col gap-3 px-4 pb-4">
                        @if (canCheckIn) {
                        <div
                            class="bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800 p-3 rounded-xl mb-1 text-left">
                            <p
                                class="text-xs text-slate-400 dark:text-slate-500 font-semibold uppercase tracking-wider">
                                Status</p>
                            <p class="text-sm font-medium text-slate-600 dark:text-slate-300 mt-0.5">Not yet checked in
                                today</p>
                        </div>
                        <app-button label="Check In" icon="pi pi-sign-in" variant="primary" [loading]="store.loading()"
                            (onClick)="onCheckIn()"></app-button>
                        <p class="text-xs text-slate-400">Start your work day</p>

                        } @else if (canCheckOut) {
                        <div
                            class="bg-indigo-50 dark:bg-indigo-950/30 border border-indigo-100 dark:border-indigo-900/50 p-3 rounded-xl mb-1 text-left">
                            <p
                                class="text-xs text-indigo-500 dark:text-indigo-400 font-semibold uppercase tracking-wider">
                                Currently In</p>
                            <p class="text-lg font-bold text-indigo-700 dark:text-indigo-300">
                                Since {{ store.todayStatus()?.checkIn | date: 'shortTime' }}
                            </p>
                        </div>
                        <app-button label="Check Out" icon="pi pi-sign-out" variant="primary"
                            [loading]="store.loading()" (onClick)="onCheckOut()"></app-button>
                        <p class="text-xs text-slate-400">Finish your work day</p>

                        } @else {
                        <div
                            class="bg-emerald-50 dark:bg-emerald-950/30 p-5 rounded-2xl border border-emerald-100 dark:border-emerald-900/50 text-center">
                            <i
                                class="pi pi-check-circle text-3xl text-emerald-500 dark:text-emerald-400 mb-2 block"></i>
                            <p class="font-bold text-emerald-700 dark:text-emerald-300">Day Completed!</p>
                            <p class="text-xs text-emerald-600 dark:text-emerald-400 mt-1">
                                In: {{ store.todayStatus()?.checkIn | date: 'shortTime' }} |
                                Out: {{ store.todayStatus()?.checkOut | date: 'shortTime' }}
                            </p>
                            <p
                                class="text-xs font-semibold text-emerald-700 dark:text-emerald-300 mt-2 bg-emerald-100 dark:bg-emerald-900/50 rounded-full px-3 py-0.5 inline-block">
                                {{ todayHours }} logged
                            </p>
                        </div>
                        }
                    </div>

                </div>
            </div>
        </p-card>

        <!-- Quick Stats Cards -->
        <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 content-start">
            <p-card styleClass="!shadow-sm !border-slate-100 dark:!border-slate-800 h-full">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-2xl bg-indigo-50 dark:bg-indigo-950/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 shrink-0">
                        <i class="pi pi-clock text-xl"></i>
                    </div>
                    <div>
                        <p class="text-slate-500 dark:text-slate-400 text-sm font-medium">Today's Hours</p>
                        <p class="text-2xl font-bold text-slate-900 dark:text-slate-100">{{ todayHours }}</p>
                    </div>
                </div>
            </p-card>

            <p-card styleClass="!shadow-sm !border-slate-100 dark:!border-slate-800 h-full">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-2xl bg-emerald-50 dark:bg-emerald-950/30 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shrink-0">
                        <i class="pi pi-calendar-plus text-xl"></i>
                    </div>
                    <div>
                        <p class="text-slate-500 dark:text-slate-400 text-sm font-medium">Total Logs This View</p>
                        <p class="text-2xl font-bold text-slate-900 dark:text-slate-100">{{ store.logs().length }}</p>
                    </div>
                </div>
            </p-card>

            <p-card styleClass="!shadow-sm !border-slate-100 dark:!border-slate-800 h-full md:col-span-2">
                <div class="flex items-center gap-4">
                    <div
                        class="w-12 h-12 rounded-2xl bg-amber-50 dark:bg-amber-950/30 flex items-center justify-center text-amber-600 dark:text-amber-400 shrink-0">
                        <i class="pi pi-info-circle text-xl"></i>
                    </div>
                    <div>
                        <p class="text-slate-500 dark:text-slate-400 text-sm font-medium">Backend Rules</p>
                        <p class="text-sm text-slate-600 dark:text-slate-400">One check-in and check-out allowed per
                            day. Resets at midnight UTC.</p>
                    </div>
                </div>
            </p-card>
        </div>
    </div>

    <!-- Attendance History Table -->
    <p-card styleClass="!shadow-sm !border-slate-200 dark:!border-slate-800" header="Attendance History">
        <app-common-table [data]="store.logs()" [columns]="columns">
        </app-common-table>
    </p-card>
</div>